<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Js Basic</title>
	<style>
		ul {
			display: none;
		}

		input:focus~ul {
			display: block;
		}
	</style>
</head>

<body>
	<button id="btn">Clickme</button>

	<script>
		//Promise.resolve
		//Promise.reject
		//Promise.all

        // var promise = new Promise((resolve, reject) => {
        //     //logic trong day
        //     // resolve('success!');
        //     reject('Error!');
        // })

        //Thay vi new promise nhu tren, ta co cach khac ngan gon hon:
        // var promise = Promise.resolve('success!');


        //promise all
        var promise = Promise.reject('error!');
        promise
            .then(function (rs) {
                console.log('rs: ',rs);
            })
            .catch(function (error) {
                console.log('Error: ', error);
            })

        //một số thư viện có output luôn luôn là một promise

        var promise1 = new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve([1])
            }, 2000);
        })
        // var promise2 = new Promise((resolve, reject) => {
        //     setTimeout(() => {
        //         resolve([2,3])
        //     }, 5000);
        // })

        // Promise.all([promise1, promise2])
        //     // .then(function (rs) {
        //     //     console.log(rs);
        //     //     var rs1 = rs[0];
        //     //     var rs2 = rs[1];
        //     //     console.log(rs1.concat(rs2));
        //     // });

        //     //Cach khac: dung ES6
        //     .then(function ([rs1, rs2]) {
                
        //         console.log(rs1.concat(rs2));
        //     })


        //Nếu có 1 promise bị reject
        var promise2 = new Promise((resolve, reject) => {
            setTimeout(() => {
                reject('error')
            }, 5000);
        })

        Promise.all([promise1, promise2])
            // .then(function (rs) {
            //     console.log(rs);
            //     var rs1 = rs[0];
            //     var rs2 = rs[1];
            //     console.log(rs1.concat(rs2));
            // });

            //Cach khac: dung ES6
            .then(function ([rs1, rs2]) {
                
                console.log(rs1.concat(rs2));
            })
            .catch(function (err) {
                console.log('err: ',err);
            })
	</script>
</body>

</html>